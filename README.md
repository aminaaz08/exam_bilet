# exam_bilet

**Билет 1. «Программа на языке C++»**
---
Язык C++ — это компилируемый язык программирования общего назначения, сочетающий низкоуровневые возможности управления ресурсами с высокоуровневыми абстракциями объектно-ориентированного и обобщённого программирования. Программа на C++ состоит из одного или нескольких **исходных файлов** (обычно с расширением `.cpp`) и **заголовочных файлов** (`.h` или `.hpp`). Рассмотрим подробнее все аспекты, связанные с организацией, сборкой и выполнением такой программы.

---

#### **1. Содержимое файлов `.cpp` и `.h`**

- **Заголовочные файлы** (`.h`, `.hpp`) содержат **объявления**:  
  - прототипы функций,  
  - объявления классов,  
  - макросы,  
  - внешние переменные (`extern`),  
  - шаблоны (в том числе функций и классов).  
  Они служат своего рода «интерфейсом» модуля — то, что другие части программы должны знать о данном модуле, чтобы его использовать.

- **Исходные файлы** (`.cpp`) содержат **определения**:  
  - тела функций,  
  - реализации методов классов,  
  - определения глобальных переменных.  
  Это — исполняемая часть кода, которая компилируется в объектный файл.

---

#### **2. Зачем разделять код на `.h` и `.cpp`?**

Разделение на заголовочные и исходные файлы решает несколько важных задач:

- **Повторное использование**: один заголовочный файл может подключаться во множество `.cpp`-файлов, обеспечивая согласованность интерфейса.
- **Компиляция по частям**: при изменении реализации (в `.cpp`) не нужно перекомпилировать все зависимости — только сам файл. Это ускоряет сборку.
- **Сокрытие реализации**: пользователь модуля видит только интерфейс (`.h`), но не детали реализации (`.cpp`).
- **Избежание множественного определения**: если бы всё было в `.cpp`, подключение одного файла в другой привело бы к дублированию определений при линковке.

---

#### **3. Структура программы**

##### **Точка входа**
Точка входа в любую программу на C++ — это функция `main()`. Она вызывается операционной системой при запуске программы. Существует два стандартных варианта её объявления:

```cpp
int main();
int main(int argc, char* argv[]);
```

Первый — без аргументов командной строки, второй — с ними.

##### **Назначение `return` в `main`**
Оператор `return` в функции `main` возвращает **код завершения программы** в операционную систему:
- `return 0;` или `return EXIT_SUCCESS;` — успешное завершение,
- ненулевое значение (например, `return 1;` или `return EXIT_FAILURE;`) — ошибка.

Если `main` не содержит явного `return`, компилятор автоматически добавляет `return 0;`.

---

#### **4. Структурные элементы программы**

- **Директивы препроцессора**: команды, обрабатываемые до компиляции (например, `#include`, `#define`, `#ifdef`).
- **Комментарии**:
  - Однострочные: `// комментарий`
  - Многострочные: `/* комментарий */`
  - Также возможны документирующие комментарии (Doxygen): `///`, `/** ... */`
- **Подключение стороннего кода**: осуществляется с помощью директивы `#include <...>` (для системных заголовков) или `#include "..."` (для пользовательских).

---

#### **5. Проблемы циклического и повторного подключения заголовков**

Если заголовочный файл подключается несколько раз (прямо или косвенно), возникает ошибка **множественного определения**. Если файлы включают друг друга циклически (`A.h → B.h → A.h`), компилятор зацикливается.

**Способы решения**:

- **Include guards** (защитные директивы):
  ```cpp
  #ifndef MY_HEADER_H
  #define MY_HEADER_H
  // содержимое
  #endif
  ```
- **`#pragma once`** — нестандартная, но широко поддерживаемая директива, обеспечивающая однократное включение файла.

Оба подхода предотвращают повторную обработку содержимого заголовка.

---

#### **6. Подключение статических и динамических библиотек**

- **Статические библиотеки** (`.a` в Linux, `.lib` в Windows) — код библиотеки **копируется** в исполняемый файл на этапе линковки. Преимущества: автономность; недостатки: увеличение размера, невозможность обновления без пересборки.
- **Динамические библиотеки** (`.so` в Linux, `.dll` в Windows) — подгружаются **во время выполнения**. Преимущества: экономия памяти, возможность обновления; недостатки: зависимость от наличия библиотеки в системе.

Подключение:
- На этапе компиляции указываются флаги (`-l` для линковки, `-L` для путей).
- В коде используется `#include` для заголовков библиотеки.

---

#### **7. Этапы сборки программы**

Сборка C++-программы проходит в **четыре основных этапа**:

1. **Препроцессинг**: обработка директив (`#include`, `#define` и т.д.). Результат — расширенный исходный код.
2. **Компиляция**: перевод каждого `.cpp`-файла в **объектный файл** (`.o` или `.obj`), содержащий машинный код, но без разрешения внешних ссылок.
3. **Оптимизация**: выполняется компилятором (на этапе компиляции) или линкером (link-time optimization). Может включать инлайнинг, удаление мёртвого кода, переупорядочивание и т.д.
4. **Компоновка (линковка)**: объединение объектных файлов и библиотек в единый исполняемый файл. Линкер разрешает внешние ссылки (например, вызовы функций из других модулей).

**Основные компиляторы C++**:
- **GCC** (GNU Compiler Collection) — открытый, кроссплатформенный.
- **Clang** — современный, с отличными диагностическими сообщениями.
- **MSVC** (Microsoft Visual C++) — стандарт для Windows в экосистеме Microsoft.

---

#### **8. Артефакты сборки**

- **Исполняемый файл** (`.exe` в Windows, без расширения или с `.out` в Unix-системах) — готовая программа, которую можно запустить.
- **Статическая библиотека** — архив объектных файлов (`.a` / `.lib`), подключаемый на этапе линковки.
- **Динамическая библиотека** — отдельный файл (`.so` / `.dll`), загружаемый ОС при запуске или во время выполнения.

---

#### **9. Запуск программы**

- **Без IDE**: через командную строку:  
  ```bash
  ./my_program arg1 arg2
  ```
- **Поиск динамических библиотек**:
  - В Linux: переменная окружения `LD_LIBRARY_PATH`, системные каталоги (`/usr/lib`, `/lib`).
  - В Windows: текущая директория, системные пути (`PATH`), каталог программы.
- **Аргументы командной строки** передаются в `main` через параметры:
  ```cpp
  int main(int argc, char* argv[])
  ```
  где `argc` — количество аргументов (включая имя программы), `argv` — массив строк с аргументами.

---

#### **10. Размещение программы в памяти**

При запуске программа загружается в **виртуальное адресное пространство процесса**, которое делится на сегменты:

- **Текст (code segment)** — машинные инструкции (только для чтения).
- **Данные**:
  - Инициализированные глобальные/статические переменные (`.data`),
  - Неинициализированные (`.bss`).
- **Стек (stack)** — автоматически управляемая область памяти для локальных переменных и вызовов функций. Растёт «вниз». Ограничен по размеру (обычно несколько МБ).
- **Куча (heap)** — динамически выделяемая память (через `new`/`malloc`). Управляется программистом. Может быть ограничена только объёмом виртуальной памяти.

**Доступный объём памяти зависит от разрядности**:
- **32-битная система**: максимум ~4 ГБ виртуального адресного пространства (часто ~2–3 ГБ для пользователя).
- **64-битная система**: теоретически до 2⁶⁴ байт (~16 ЭБ), на практике ограничено ОС (например, Windows использует 48 бит → ~256 ТБ).

---

### **Заключение**

Таким образом, программа на C++ — это сложная система, включающая строгую модульную структуру, многоэтапную сборку и чёткое распределение ресурсов в памяти. Понимание этих механизмов позволяет писать эффективный, надёжный и поддерживаемый код, а также успешно отлаживать и оптимизировать приложения.

---

Если тебе нужно — могу подготовить **карточку для заучивания**, **схему** или **краткий конспект** по этому билету. Готов продолжать! Присылай следующий файл.
